<!DOCTYPE html>
<html lang="dv" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>އާޓިކަލްސް & ޚަބަރު - ޒާދް އެކަޑެމީ</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thaana:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* --- 1. THEME VARIABLES --- */
        :root {
            --primary: #0C2D48;
            --accent: #B49658;
            --bg: #f4f6f8;
            --white: #ffffff;
            --text: #333333;
            --meta: #777777;
            
            /* Font Stack: Tries Local Galan/Faruma -> Then Google Noto Sans */
            --font-main: 'Mv Galan', 'Faruma', 'Noto Sans Thaana', sans-serif;
        }

        @font-face { font-family: 'Mv Galan'; src: url('fonts/Mv Galan.ttf') format('truetype'); }
        @font-face { font-family: 'Faruma'; src: url('fonts/Faruma.ttf') format('truetype'); }

        /* --- 2. SECURITY & BASE STYLES --- */
        body { 
            margin: 0; 
            font-family: var(--font-main); 
            background: var(--bg); 
            color: var(--text); 
            padding-bottom: 100px; /* Space for admin bar */
            line-height: 1.8; 
            
            /* SECURITY: Disable Text Selection */
            user-select: none; 
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        * { box-sizing: border-box; }

        /* --- HEADER --- */
        header { 
            background: linear-gradient(135deg, var(--primary) 0%, #051626 100%); 
            color: var(--white); 
            padding: 40px 5%; 
            text-align: center; 
            border-bottom: 6px solid var(--accent); 
            margin-bottom: 40px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .page-title { font-size: 2.8em; font-weight: bold; margin: 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .page-subtitle { color: var(--accent); margin-top: 10px; font-size: 1.3em; opacity: 0.9; }

        /* --- GRID SYSTEM --- */
        .container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }
        
        .article-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); 
            gap: 30px; 
        }

        /* --- ARTICLE CARD --- */
        .article-card { 
            background: var(--white); 
            border-radius: 15px; 
            overflow: hidden; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); 
            transition: all 0.3s ease;
            display: flex; flex-direction: column;
            position: relative;
            border: 1px solid #eee;
            height: fit-content;
        }

        .article-card:hover { transform: translateY(-8px); box-shadow: 0 15px 30px rgba(0,0,0,0.15); border-color: var(--accent); }

        .card-img-container { position: relative; height: 220px; overflow: hidden; background: #eee; }
        .card-img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .article-card:hover .card-img { transform: scale(1.05); }

        .card-body { padding: 25px; flex-grow: 1; display: flex; flex-direction: column; }

        /* Meta Data (Author, Date) */
        .meta-row { 
            display: flex; justify-content: space-between; align-items: center; 
            font-size: 0.85em; color: var(--meta); margin-bottom: 15px; 
            border-bottom: 1px dashed #eee; padding-bottom: 10px;
        }
        .meta-item { display: flex; align-items: center; gap: 6px; }
        .meta-item i { color: var(--accent); }

        .article-tag { 
            background: var(--primary); color: white; padding: 2px 10px; 
            font-size: 0.8em; border-radius: 20px; width: fit-content; margin-bottom: 10px;
        }

        .article-title { 
            font-size: 1.6em; font-weight: bold; margin: 0 0 15px 0; 
            line-height: 1.4; color: var(--primary); 
        }
        
        /* Summary Text */
        .article-summary { 
            font-size: 1.1em; color: #555; line-height: 1.7; margin-bottom: 20px;
            display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
        }

        /* Hidden Full Content (Used for Details View) */
        .full-content { display: none; } 

        /* Read More Button */
        .read-more-btn { 
            display: inline-flex; align-items: center; gap: 10px; cursor: pointer;
            color: var(--white); background: var(--primary); font-weight: bold; font-size: 1em; 
            padding: 10px 25px; border-radius: 50px; align-self: flex-start; margin-top: auto;
            transition: 0.3s;
        }
        .read-more-btn:hover { background: var(--accent); transform: translateX(-5px); }

        /* --- DETAILS MODAL (POPUP) --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 5000;
            display: none; justify-content: center; align-items: flex-start;
            overflow-y: auto; padding: 40px 20px;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white; width: 100%; max-width: 900px;
            border-radius: 15px; padding: 0; position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .modal-header { position: relative; height: 350px; }
        .modal-img { width: 100%; height: 100%; object-fit: cover; border-radius: 15px 15px 0 0; }
        .close-modal {
            position: absolute; top: 20px; left: 20px;
            background: rgba(0,0,0,0.6); color: white;
            width: 40px; height: 40px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 1.2em; transition: 0.3s;
        }
        .close-modal:hover { background: red; }

        .modal-body { padding: 40px; }
        .modal-title { font-size: 2.2em; color: var(--primary); font-weight: bold; margin-bottom: 10px; }
        .modal-meta { color: #666; font-size: 0.9em; margin-bottom: 30px; display: flex; gap: 20px; border-bottom: 2px solid var(--accent); padding-bottom: 15px; }
        .modal-text { font-size: 1.2em; line-height: 2; color: #333; white-space: pre-wrap; }

        /* --- ADMIN STYLES --- */
        .admin-ui { display: none !important; }
        body.admin-active .admin-ui { display: inline-flex !important; }
        
        body.admin-active .article-card { border: 2px dashed var(--accent); }
        body.admin-active .card-img { cursor: pointer; opacity: 0.8; }
        body.admin-active .card-img:hover { opacity: 1; border: 4px solid red; }
        
        /* Show full content in admin mode inside the card for editing */
        body.admin-active .full-content { 
            display: block; border: 1px dashed #ccc; padding: 10px; margin-top: 10px; background: #fffbe6;
        }
        body.admin-active .article-summary { display: none; } /* Hide summary in admin, show full text */
        body.admin-active .read-more-btn { display: none; } /* Hide button in admin */

        /* Allow selection in admin mode */
        body.admin-active { user-select: text; -webkit-user-select: text; }

        .delete-btn { 
            position: absolute; top: 10px; left: 10px; background: red; color: white; 
            border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; z-index: 10; font-weight: bold;
        }

        .admin-toolbar {
            position: fixed; bottom: 0; left: 0; width: 100%; background: #1a1a1a; color: white;
            padding: 15px 30px; display: none; justify-content: space-between; align-items: center; z-index: 9999;
            border-top: 4px solid var(--accent); box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
        }
        .admin-btn { padding: 10px 25px; border-radius: 5px; border: none; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 10px; }
        .save-btn { background: var(--accent); color: white; }
        .add-btn { background: #27ae60; color: white; }

        [contenteditable="true"] { outline: none; background: rgba(255, 255, 255, 0.9); border-bottom: 2px dashed var(--accent); cursor: text; }
        
        footer { text-align: center; margin-top: 60px; color: #888; font-size: 0.9em; padding: 40px; background: #eee; }
    </style>
</head>
<body oncontextmenu="return false;">

    <header>
        <h1 class="page-title">ޒާދް އެކަޑެމީ - އާޓިކަލްސް</h1>
        <div class="page-subtitle">އެންމެ ފަހުގެ ޚަބަރުތަކާއި، ދިރާސީ ލިޔުންތައް (Admin Editable)</div>
    </header>

    <div class="container">
        <div class="article-grid" id="articleGrid">
            
            <article class="article-card">
                <button class="delete-btn admin-ui" onclick="removeCard(this)">ފޮހެލާ</button>
                <div class="card-img-container">
                    <img src="https://images.unsplash.com/photo-1524178232363-1fb2b075b655?w=600" class="card-img" onclick="changeImage(this)">
                </div>
                <div class="card-body">
                    <div class="article-tag" contenteditable="false">ތަޢުލީމް</div>
                    <h2 class="article-title" contenteditable="false">އޮންލައިންކޮށް ކިޔެވުމުގެ ފައިދާ</h2>
                    
                    <div class="meta-row">
                        <div class="meta-item"><i class="far fa-calendar-alt"></i> <span contenteditable="false">21 Dec 2025</span></div>
                        <div class="meta-item"><i class="far fa-user"></i> <span contenteditable="false">އެޑްމިން</span></div>
                    </div>

                    <div class="article-summary" contenteditable="false">
                        މިއީ ކާޑުގެ ބޭރުގައި ފެންނަން އިންނާނެ ޚުލާސާއެވެ. މިތަން ކުރުކޮށް ބަހައްޓަވާށެވެ.
                    </div>

                    <div class="full-content" contenteditable="false">
                        މިއީ އާޓިކަލްގެ ފުރިހަމަ ތަފްޞީލެވެ. މިތަނުގައި ބޭނުންވަރަކަށް ދިގުކޮށް ލިޔުއްވޭނެއެވެ. 
                        <br><br>
                        އެޑްމިން މޯޑުގައި މިތަން ފެންނާނެއެވެ. އެކަމަކު އާދައިގެ ޔޫސަރަށް މިތަން ފެންނާނީ "އިތުރަށް ވިދާޅުވޭ" އަށް ފިތާލުމުން ހުޅުވޭ ޕޮޕްއަޕް ވިންޑޯ އިންނެވެ.
                        <br><br>
                        މިތަނުގައި ޕެރެގްރާފްތައް ވަކިކޮށް، ތަފްސީލީ މައުލޫމާތު ހިމަނުއްވާށެވެ.
                    </div>

                    <div class="read-more-btn" onclick="openModal(this)">
                        އިތުރަށް ވިދާޅުވޭ <i class="fas fa-arrow-left"></i>
                    </div>
                </div>
            </article>

        </div>
    </div>

    <footer>
        <div id="copyright" ondblclick="activateAdmin()" style="cursor: pointer; display: inline-block; padding: 10px;">
            © 2025 Zaad Academy. All Rights Reserved. (Double Click to Update)
        </div>
    </footer>

    <div class="admin-toolbar" id="adminToolbar">
        <div>
            <i class="fas fa-lock-open"></i> <strong>Admin Mode</strong>
            <small style="margin-right:10px; opacity:0.7;">(Editing Enabled)</small>
        </div>
        <div style="display:flex; gap:10px;">
            <button class="admin-btn add-btn" onclick="addNewArticle()"><i class="fas fa-plus"></i> އާޓިކަލް އިތުރުކުރޭ</button>
            <button class="admin-btn save-btn" onclick="savePage()"><i class="fas fa-download"></i> ސޭވް & ޑައުންލޯޑް</button>
        </div>
    </div>

    <div class="modal-overlay" id="detailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="close-modal" onclick="closeModal()"><i class="fas fa-times"></i></div>
                <img src="" id="modalImg" class="modal-img">
            </div>
            <div class="modal-body">
                <h1 id="modalTitle" class="modal-title"></h1>
                <div id="modalMeta" class="modal-meta"></div>
                <div id="modalText" class="modal-text"></div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. SECURITY SCRIPTS ---
        document.onkeydown = function(e) {
            if(document.body.classList.contains('admin-active')) return true; 
            if(event.keyCode == 123) return false; // F12
            if(e.ctrlKey && e.shiftKey && (e.keyCode == 'I'.charCodeAt(0) || e.keyCode == 'C'.charCodeAt(0) || e.keyCode == 'J'.charCodeAt(0))) return false;
            if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false;
        }

        // --- 2. MODAL LOGIC (DETAILS VIEW) ---
        function openModal(btn) {
            if(document.body.classList.contains('admin-active')) return; // Don't open in admin mode

            const card = btn.closest('.article-card');
            
            // Get Content from Card
            const img = card.querySelector('.card-img').src;
            const title = card.querySelector('.article-title').innerHTML;
            const meta = card.querySelector('.meta-row').innerHTML;
            const fullText = card.querySelector('.full-content').innerHTML;

            // Set Content to Modal
            document.getElementById('modalImg').src = img;
            document.getElementById('modalTitle').innerHTML = title;
            document.getElementById('modalMeta').innerHTML = meta;
            document.getElementById('modalText').innerHTML = fullText;

            // Show Modal
            document.getElementById('detailsModal').style.display = 'flex';
            document.body.style.overflow = 'hidden'; // Stop background scrolling
        }

        function closeModal() {
            document.getElementById('detailsModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        window.onclick = function(e) {
            if (e.target == document.getElementById('detailsModal')) {
                closeModal();
            }
        }

        // --- 3. ADMIN FUNCTIONS ---
        function activateAdmin() {
            if(document.body.classList.contains('admin-active')) return;
            var pass = prompt("Enter Admin Password:");
            if(pass === "admin123") {
                document.body.classList.add('admin-active');
                document.getElementById('adminToolbar').style.display = 'flex';
                
                // Enable Editing
                const editables = document.querySelectorAll('.article-title, .article-summary, .full-content, .article-tag, .meta-item span');
                editables.forEach(el => el.contentEditable = "true");
                
                alert("Admin Mode Active!\n\n1. Click text to edit.\n2. Click images to change URL.\n3. Use the Green button to add new articles.\n4. Click 'Save & Download' when finished.");
            } else {
                alert("Incorrect Password!");
            }
        }

        function addNewArticle() {
            const grid = document.getElementById('articleGrid');
            const newCard = document.createElement('article');
            newCard.className = 'article-card';
            
            // Template for new card
            newCard.innerHTML = `
                <button class="delete-btn admin-ui" onclick="removeCard(this)">ފޮހެލާ</button>
                <div class="card-img-container">
                    <img src="https://via.placeholder.com/600x400" class="card-img" onclick="changeImage(this)">
                </div>
                <div class="card-body">
                    <div class="article-tag" contenteditable="true">Category</div>
                    <h2 class="article-title" contenteditable="true">New Article Title Here</h2>
                    
                    <div class="meta-row">
                        <div class="meta-item"><i class="far fa-calendar-alt"></i> <span contenteditable="true">Date</span></div>
                        <div class="meta-item"><i class="far fa-user"></i> <span contenteditable="true">Author</span></div>
                    </div>

                    <div class="article-summary" contenteditable="true">
                        Write a short summary here (visible on card).
                    </div>

                    <div class="full-content" contenteditable="true">
                        Write the FULL article content here. This will be shown in the popup window.
                    </div>

                    <div class="read-more-btn" onclick="openModal(this)">
                        އިތުރަށް ވިދާޅުވޭ <i class="fas fa-arrow-left"></i>
                    </div>
                </div>
            `;
            
            // Insert at the beginning
            grid.insertBefore(newCard, grid.firstChild);
        }

        function removeCard(btn) {
            if(confirm("Are you sure you want to delete this article?")) {
                btn.closest('.article-card').remove();
            }
        }

        function changeImage(img) {
            if(document.body.classList.contains('admin-active')) {
                let url = prompt("Enter Image URL:", img.src);
                if(url) img.src = url;
            }
        }

        // --- 4. SAVE FUNCTION ---
        function savePage() {
            let clone = document.documentElement.cloneNode(true);
            clone.querySelector('body').classList.remove('admin-active');
            
            // Disable contenteditable
            let editables = clone.querySelectorAll('[contenteditable]');
            editables.forEach(el => el.removeAttribute('contenteditable'));

            // Hide toolbar
            let toolbar = clone.querySelector('#adminToolbar');
            if(toolbar) toolbar.style.display = 'none';

            let htmlContent = "<!DOCTYPE html>\n" + clone.outerHTML;
            let blob = new Blob([htmlContent], { type: "text/html" });
            let link = document.createElement("a");
            
            // Date string for filename
            let d = new Date();
            let dateStr = d.getFullYear() + "-" + (d.getMonth()+1) + "-" + d.getDate();
            
            link.href = URL.createObjectURL(blob);
            link.download = `zaad_articles_${dateStr}.html`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert("File Saved! Please upload the new file to your host.");
        }
    </script>

</body>
</html>
