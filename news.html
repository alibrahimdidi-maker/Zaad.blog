<!DOCTYPE html>
<html lang="dv" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>މަޢުލޫމާތާއި ޚަބަރު - ޒާދް އެކަޑެމީ</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thaana:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #0C2D48;
            --accent: #B49658;
            --bg: #f4f6f8;
            --white: #ffffff;
            --text: #333333;
            --meta: #777777;
            --font-main: 'Faruma', 'Mv Galan', 'Noto Sans Thaana', sans-serif;
        }

        @font-face { font-family: 'Faruma'; src: local('Faruma'); }
        @font-face { font-family: 'Mv Galan'; src: local('Mv Galan'); }

        body { margin: 0; font-family: var(--font-main); background: var(--bg); color: var(--text); padding-bottom: 80px; line-height: 1.8; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        * { box-sizing: border-box; }

        /* --- HEADER --- */
        header { background: var(--primary); color: var(--white); padding: 40px 5%; text-align: center; border-bottom: 6px solid var(--accent); margin-bottom: 40px; }
        .page-title { font-size: 2.5em; font-weight: bold; margin: 0; }
        .page-subtitle { color: var(--accent); margin-top: 10px; font-size: 1.2em; opacity: 0.9; }

        /* --- MAIN GRID --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        
        .article-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(360px, 1fr)); 
            gap: 35px; 
        }

        /* --- ARTICLE CARD DESIGN --- */
        .article-card { 
            background: var(--white); 
            border-radius: 15px; 
            overflow: hidden; 
            box-shadow: 0 5px 20px rgba(0,0,0,0.05); 
            transition: all 0.3s ease;
            display: flex; flex-direction: column;
            position: relative;
            border: 1px solid #eee;
            height: fit-content; /* Allows expansion */
        }

        .article-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); border-color: var(--accent); }

        .card-img-container { position: relative; height: 240px; overflow: hidden; }
        .card-img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .article-card:hover .card-img { transform: scale(1.05); }

        .card-body { padding: 30px; flex-grow: 1; display: flex; flex-direction: column; }

        /* Meta Data Row */
        .meta-row { 
            display: flex; justify-content: space-between; align-items: center; 
            font-size: 0.9em; color: var(--meta); margin-bottom: 20px; border-bottom: 1px solid #f0f0f0; padding-bottom: 12px;
        }
        .meta-item { display: flex; align-items: center; gap: 6px; }
        .meta-item i { color: var(--accent); }

        /* Content Styling */
        .article-title { font-size: 1.6em; font-weight: bold; margin: 0 0 15px 0; line-height: 1.4; color: var(--primary); }
        
        /* --- TEXT TRUNCATION LOGIC --- */
        .article-excerpt { 
            font-size: 1.05em; color: #555; line-height: 1.8; margin-bottom: 25px;
            
            /* Logic to show only 3 lines */
            display: -webkit-box;
            -webkit-line-clamp: 3; 
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: max-height 0.5s ease;
        }

        /* Class added by JS to show full text */
        .article-excerpt.expanded {
            display: block;
            -webkit-line-clamp: unset;
            overflow: visible;
        }

        /* Read More Button */
        .read-more-btn { 
            display: inline-flex; align-items: center; gap: 10px; cursor: pointer;
            color: var(--white); background: var(--primary); font-weight: bold; font-size: 0.9em; 
            padding: 10px 20px; border-radius: 30px; align-self: flex-start; margin-top: auto;
            transition: 0.3s;
        }
        .read-more-btn:hover { background: var(--accent); }
        .read-more-btn i { transition: 0.3s; }
        .read-more-btn.active i { transform: rotate(180deg); } /* Flip arrow when open */

        /* --- ADMIN STYLES (HIDDEN) --- */
        .admin-ui { display: none !important; }
        
        /* ACTIVE ADMIN MODE */
        body.admin-active .admin-ui { display: inline-flex !important; }
        body.admin-active .article-card { border: 2px dashed #999; }
        body.admin-active .card-img { cursor: pointer; opacity: 0.8; }
        body.admin-active .card-img:hover { opacity: 1; border: 4px solid red; }
        
        /* IMPORTANT: When editing, show full text always */
        body.admin-active .article-excerpt { display: block; -webkit-line-clamp: unset; overflow: visible; border: 1px dashed #ccc; padding: 5px; }

        .add-article-container { text-align: center; margin-bottom: 40px; display: none; }
        body.admin-active .add-article-container { display: block; }

        .delete-btn { 
            position: absolute; top: 15px; left: 15px; background: red; color: white; 
            border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; z-index: 10; font-weight: bold;
        }

        .big-add-btn {
            background: #28a745; color: white; border: none; padding: 15px 35px; 
            border-radius: 50px; font-size: 1.2em; font-weight: bold; cursor: pointer;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4); display: inline-flex; align-items: center; gap: 10px;
        }

        /* ADMIN BAR */
        .admin-toolbar {
            position: fixed; bottom: 0; left: 0; width: 100%; background: #222; color: white;
            padding: 15px 30px; display: none; justify-content: space-between; align-items: center; z-index: 9999;
            border-top: 4px solid var(--accent);
        }
        .save-btn { background: var(--accent); color: white; padding: 10px 25px; border-radius: 5px; border: none; font-weight: bold; cursor: pointer; }

        /* EDITABLE HIGHLIGHT */
        [contenteditable="true"] { outline: none; background: rgba(255, 255, 255, 0.9); border-bottom: 2px dashed var(--accent); cursor: text; }
        [contenteditable="true"]:focus { background: white; border-bottom: 2px solid var(--primary); }

        footer { text-align: center; margin-top: 60px; color: #888; font-size: 0.9em; padding-bottom: 20px; }
    </style>
</head>
<body>

    <header>
        <h1 class="page-title">ޒާދް އެކަޑެމީ - ޚަބަރާއި މަޢުލޫމާތު</h1>
        <div class="page-subtitle">އެންމެ ފަހުގެ ޚަބަރުތަކާއި، ދިރާސީ ލިޔުންތައް އެއްތަނަކުން</div>
    </header>

    <div class="container">
        
        <div class="add-article-container">
            <button class="big-add-btn" onclick="addNewArticle()">
                <i class="fas fa-plus-circle"></i> އައު އާޓިކަލް އެއް އިތުރުކުރައްވާ
            </button>
        </div>

        <div class="article-grid" id="articleGrid">

            <article class="article-card">
                <button class="delete-btn admin-ui" onclick="removeCard(this)">ފޮހެލާ</button>
                <div class="card-img-container">
                    <img src="https://images.unsplash.com/photo-1517048676732-d65bc937f952?w=600" class="card-img" onclick="changeImage(this)">
                </div>
                <div class="card-body">
                    <div class="meta-row">
                        <div class="meta-item"><i class="far fa-calendar-alt"></i> <span contenteditable="false">20 Dec 2024</span></div>
                        <div class="meta-item"><i class="far fa-user"></i> <span contenteditable="false">އެޑްމިން</span></div>
                        <div class="meta-item"><i class="far fa-eye"></i> <span contenteditable="false">1.2k</span></div>
                    </div>
                    <h2 class="article-title" contenteditable="false">2025 ވަނަ އަހަރުގެ ޒާދް އެކަޑެމީގެ އައު ކޯސްތައް</h2>
                    <div class="article-excerpt" contenteditable="false">
                        މިއަހަރު އަލަށް ފެށުމަށް ހަމަޖެހިފައިވާ އޭ.އައި އަދި ރޮބޮޓިކްސް ކޯސްތަކަށް ކުރިމަތިލުމުގެ ފުރުޞަތު މިހާރު ވަނީ ހުޅުވާލެވިފައެވެ. މި ކޯސްތަކަކީ ދަރިވަރުންގެ މުސްތަޤްބަލަށް ވަރަށް މުހިންމު ކޯސްތަކެކެވެ. އިތުރު މަޢުލޫމާތު ހޯއްދެވުމަށް ވެބްސައިޓް ބައްލަވާލައްވާ. މި ކޯހުގައި ކިޔަވައިދޭނީ ރާއްޖެއިން ބޭރުގެ ތަޖުރިބާކާރުންނެވެ.
                        <br><br>
                        <strong>ކޯހުގެ މުއްދަތު:</strong> 6 މަސް ދުވަސް.<br>
                        <strong>ފެށޭ ތާރީޚް:</strong> 1 ޖެނުއަރީ 2025.
                    </div>
                    <div class="read-more-btn" onclick="toggleText(this)">
                        އިތުރަށް ވިދާޅުވޭ <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </article>

            <article class="article-card">
                <button class="delete-btn admin-ui" onclick="removeCard(this)">ފޮހެލާ</button>
                <div class="card-img-container">
                    <img src="https://images.unsplash.com/photo-1544717305-2782549b5136?w=600" class="card-img" onclick="changeImage(this)">
                </div>
                <div class="card-body">
                    <div class="meta-row">
                        <div class="meta-item"><i class="far fa-calendar-alt"></i> <span contenteditable="false">18 Dec 2024</span></div>
                        <div class="meta-item"><i class="far fa-user"></i> <span contenteditable="false">ޑރ. އަޙްމަދު</span></div>
                        <div class="meta-item"><i class="far fa-eye"></i> <span contenteditable="false">850</span></div>
                    </div>
                    <h2 class="article-title" contenteditable="false">ދަރިވަރުންގެ ނަފްސާނީ ދުޅަހެޔޮކަމުގެ މުހިންމުކަން</h2>
                    <div class="article-excerpt" contenteditable="false">
                        ކިޔެވުމުގެ މާޙައުލުގައި ކުދިންނަށް ދިމާވާ ގޮންޖެހުންތަކާއި، އެކަންކަމުން އަރައިގަތުމަށް ބެލެނިވެރިންނަށް ކުރެވިދާނެ ކަންކަމުގެ މައްޗަށް އަލިއަޅުވާލާފައިވާ މުހިންމު ލިޔުމެކެވެ. ކުދިންގެ ސިކުނޑި ތާޒާކޮށް ބެހެއްޓުމަށް ކުޅިވަރާއި ކަސްރަތު މުހިންމެވެ.
                        <br><br>
                        މިކަމާ ގުޅޭގޮތުން ބާއްވާ ޚާއްޞަ ސެމިނަރެއް އަންނަ ހަފްތާގައި އޮންނާނެއެވެ.
                    </div>
                    <div class="read-more-btn" onclick="toggleText(this)">
                        އިތުރަށް ވިދާޅުވޭ <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </article>

        </div>
    </div>

    <footer>
        <div id="copyright" ondblclick="activateAdmin()" style="cursor: pointer; display: inline-block; padding: 20px;">
            © 2025 Zaad Academy. All Rights Reserved.
        </div>
    </footer>

    <div class="admin-toolbar" id="adminToolbar">
        <div>
            <i class="fas fa-lock-open"></i> <strong>Admin Mode Active</strong>
            <small style="margin-right:15px; opacity:0.7;">(Click Text/Images to Edit)</small>
        </div>
        <button class="save-btn" onclick="savePage()"><i class="fas fa-download"></i> ސޭވް & ޑައުންލޯޑް</button>
    </div>

    <script>
        // --- 1. TOGGLE TEXT EXPANSION ---
        function toggleText(btn) {
            // Find the text content above the button
            let cardBody = btn.parentElement;
            let excerpt = cardBody.querySelector('.article-excerpt');
            let icon = btn.querySelector('i');

            // Toggle Class
            excerpt.classList.toggle('expanded');
            btn.classList.toggle('active');

            // Change Button Text/Icon
            if (excerpt.classList.contains('expanded')) {
                btn.childNodes[0].nodeValue = "ކުޑަ ކުރައްވާ "; // Change text to "Close"
                icon.className = "fas fa-chevron-up";
            } else {
                btn.childNodes[0].nodeValue = "އިތުރަށް ވިދާޅުވޭ "; // Change text to "Read More"
                icon.className = "fas fa-chevron-down";
            }
        }

        // --- 2. ADMIN ACTIVATION (PASSWORD PROTECTED) ---
        function activateAdmin() {
            if(document.body.classList.contains('admin-active')) return;

            var pass = prompt("Enter Admin Password:");
            if(pass === "admin123") {
                document.body.classList.add('admin-active');
                document.getElementById('adminToolbar').style.display = 'flex';
                
                // Make Text Editable
                const editables = document.querySelectorAll('.article-title, .article-excerpt, .meta-item span');
                editables.forEach(el => el.contentEditable = "true");
                
                alert("އެޑްމިން މޯޑް ހުޅުވިއްޖެ. ލިޔުންތަކަށް ފިއްތަވައިގެން ބަދަލުކުރައްވާ.");
            } else {
                alert("ޕާސްވޯޑް ނުބައި!");
            }
        }

        // --- 3. ADD NEW ARTICLE ---
        function addNewArticle() {
            const grid = document.getElementById('articleGrid');
            const newArticle = document.createElement('article');
            newArticle.className = 'article-card';
            newArticle.innerHTML = `
                <button class="delete-btn admin-ui" onclick="removeCard(this)">ފޮހެލާ</button>
                <div class="card-img-container">
                    <img src="https://via.placeholder.com/600x400?text=Upload+Image" class="card-img" onclick="changeImage(this)">
                </div>
                <div class="card-body">
                    <div class="meta-row">
                        <div class="meta-item"><i class="far fa-calendar-alt"></i> <span contenteditable="true">Date</span></div>
                        <div class="meta-item"><i class="far fa-user"></i> <span contenteditable="true">Author</span></div>
                        <div class="meta-item"><i class="far fa-eye"></i> <span contenteditable="true">0</span></div>
                    </div>
                    <h2 class="article-title" contenteditable="true">އައު އާޓިކަލްގެ ސުރުޚީ</h2>
                    <div class="article-excerpt" contenteditable="true">
                        މިތަނުގައި އާޓިކަލްގެ ތަފްސީލް ލިޔުއްވާ... މިގޮޅި ކިތަންމެ ބޮޑުކޮށް ލިޔުނަސް ޕަބްލިޝް ކުރުމުން ފެންނާނީ ފުރަތަމަ 3 ލައިން. ދެން "އިތުރަށް ވިދާޅުވޭ" އަށް ފިއްތާލީމަ ބޮޑުވާނީ.
                    </div>
                    <div class="read-more-btn" onclick="toggleText(this)">
                        އިތުރަށް ވިދާޅުވޭ <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            `;
            grid.prepend(newArticle);
        }

        // --- 4. HELPER FUNCTIONS ---
        function removeCard(btn) {
            if(confirm("މި އާޓިކަލް ފޮހެލަން ބޭނުންފުޅުތޯ؟")) {
                btn.closest('.article-card').remove();
            }
        }

        function changeImage(img) {
            if(document.body.classList.contains('admin-active')) {
                let url = prompt("ފޮޓޯ ލިންކް (URL):", img.src);
                if(url) img.src = url;
            }
        }

        // --- 5. SAVE & DOWNLOAD ---
        function savePage() {
            let clone = document.documentElement.cloneNode(true);
            
            // Cleanup for public view
            clone.querySelector('body').classList.remove('admin-active');
            
            // Remove contenteditable
            let editables = clone.querySelectorAll('[contenteditable]');
            editables.forEach(el => el.removeAttribute('contenteditable'));

            // Reset all expanded texts to closed state
            let expandedText = clone.querySelectorAll('.article-excerpt.expanded');
            expandedText.forEach(el => el.classList.remove('expanded'));
            
            // Reset buttons to "Read More"
            let buttons = clone.querySelectorAll('.read-more-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
                btn.innerHTML = 'އިތުރަށް ވިދާޅުވޭ <i class="fas fa-chevron-down"></i>';
            });

            // Hide Toolbar
            let toolbar = clone.querySelector('#adminToolbar');
            if(toolbar) toolbar.style.display = 'none';

            // Download
            let htmlContent = "<!DOCTYPE html>\n" + clone.outerHTML;
            let blob = new Blob([htmlContent], { type: "text/html" });
            let link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = "articles.html";
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>

</body>
</html>
